{% extends 'admin/base.html' %}
{% block content %}
<div class="d-print-none mb-3">
  <a class="btn btn-outline-brand" href="/admin/products/export">Export CSV</a>
  <a class="btn btn-outline-brand" href="/admin/products/export.json">Export JSON</a>
  <button class="btn btn-outline-brand" onclick="window.print()">Print</button>
</div>
<h2>Products</h2>
<div class="row">
  {% for p in products %}
  <div class="col-md-6 mb-2">
    <div class="card">
      <div class="card-body d-flex gap-2">
        {% set primary = (p.images and p.images[0]) or p.image_url %}
        <img src="{{ primary }}" alt="{{ p.name }}" style="width:120px;height:120px;object-fit:cover;" class="me-2">
        <div>
          <strong>{{p.name}}</strong><br>
          <small class="text-muted">Slug: {{p.slug}}</small><br>
          <small>Category: {{p.category_name}} ({{p.category_slug}})</small><br>
          <small>Price: {{p.price}}</small>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
<script>
  window.addEventListener('DOMContentLoaded', () => { setTimeout(() => window.print(), 300); })
</script>
{% endblock %}
