{% extends 'admin/base.html' %}
{% block breadcrumbs %}
<nav class="px-4 pb-3 text-sm text-slate-500" aria-label="breadcrumb">
  <ol class="breadcrumb m-0">
    <li class="breadcrumb-item"><a href="/admin">Admin</a></li>
    <li class="breadcrumb-item active" aria-current="page">Announcements</li>
  </ol>
</nav>
{% endblock %}
{% block content %}
<div class="space-y-6">
  <div class="flex items-center justify-between">
    <h2 class="text-lg font-semibold">Announcement Bar Messages</h2>
    <a href="/" target="_blank" class="text-brand text-sm">View Site</a>
  </div>

  <div class="rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4">
    <form method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <div class="mb-3">
        <label class="form-label">Messages (one per line)</label>
        <textarea name="messages" class="form-control" rows="10" placeholder="Enter one message per line">{% for m in messages %}{{ m }}
{% endfor %}</textarea>
      </div>
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-success">Save</button>
        <a href="/admin" class="btn btn-outline-secondary">Back to Dashboard</a>
      </div>
    </form>
  </div>

  <div class="rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-4">
    <h3 class="font-semibold mb-2">Preview</h3>
    <div class="top-banner py-1" style="position:static">
      <div class="container d-flex align-items-center justify-content-between">
        <div class="marquee-viewport" style="overflow:hidden;white-space:nowrap;width:100%">
          <div id="promo-marquee" class="marquee-track"></div>
        </div>
      </div>
    </div>
    <script type="application/json" id="promoMessagesData">{{ (messages or [])|tojson }}</script>
    <script>(function(){ try{ window.dispatchEvent(new Event('DOMContentLoaded')); }catch(e){} })();</script>
  </div>
</div>
{% endblock %}
